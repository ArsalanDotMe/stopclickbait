!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.picoModal=b()}(this,function(){"use strict";function a(a){return"object"==typeof Node?a instanceof Node:a&&"object"==typeof a&&"number"==typeof a.nodeType}function b(a){return"string"==typeof a}function c(){var a=[];return{watch:a.push.bind(a),trigger:function(b){for(var c=!0,d={preventDefault:function(){c=!1}},e=0;e<a.length;e++)a[e](b,d);return c}}}function d(a){this.elem=a}function e(a,b){return d.div(a("parent")).clazz("pico-overlay").clazz(a("overlayClass","")).stylize({display:"none",position:"fixed",top:"0px",left:"0px",height:"100%",width:"100%",zIndex:1e4}).stylize(a("overlayStyles",{opacity:.5,background:"#000"})).onClick(function(){a("overlayClose",!0)&&b()})}function f(a,b){var c=a("width","auto");"number"==typeof c&&(c=""+c+"px");var e=d.div(a("parent")).clazz("pico-content").clazz(a("modalClass","")).stylize({display:"none",position:"fixed",zIndex:10001,left:"50%",top:"50px",width:c,"-ms-transform":"translateX(-50%)","-moz-transform":"translateX(-50%)","-webkit-transform":"translateX(-50%)","-o-transform":"translateX(-50%)",transform:"translateX(-50%)"}).stylize(a("modalStyles",{backgroundColor:"white",padding:"20px",borderRadius:"5px"})).html(a("content")).attr("role","dialog").onClick(function(a){var c=new d(a.target).anyAncestor(function(a){return/\bpico-close\b/.test(a.elem.className)});c&&b()});return e}function g(a,b){return b("closeButton",!0)?a.child().html(b("closeHtml","&#xD7;")).clazz("pico-close").clazz(b("closeClass","")).stylize(b("closeStyles",{borderRadius:"2px",cursor:"pointer",height:"15px",width:"15px",position:"absolute",top:"5px",right:"5px",fontSize:"16px",textAlign:"center",lineHeight:"15px",background:"#CCC"})):void 0}function h(a){return function(){return a().elem}}return d.div=function(a){"string"==typeof a&&(a=document.querySelector(a));var b=document.createElement("div");return(a||document.body).appendChild(b),new d(b)},d.prototype={child:function(){return d.div(this.elem)},stylize:function(a){a=a||{},"undefined"!=typeof a.opacity&&(a.filter="alpha(opacity="+100*a.opacity+")");for(var b in a)a.hasOwnProperty(b)&&(this.elem.style[b]=a[b]);return this},clazz:function(a){return this.elem.className+=" "+a,this},html:function(b){return a(b)?this.elem.appendChild(b):this.elem.innerHTML=b,this},onClick:function(a){return this.elem.addEventListener("click",a),this},destroy:function(){this.elem.parentNode.removeChild(this.elem)},hide:function(){this.elem.style.display="none"},show:function(){this.elem.style.display="block"},attr:function(a,b){return this.elem.setAttribute(a,b),this},anyAncestor:function(a){for(var b=this.elem;b;){if(a(new d(b)))return!0;b=b.parentNode}return!1}},function(d){function i(a,b){var c=d[a];return"function"==typeof c&&(c=c(b)),void 0===c?b:c}function j(){u().hide(),t().hide(),s.trigger(w)}function k(){r.trigger(w)&&j()}function l(a){return function(){return a.apply(this,arguments),w}}function m(a){if(!n){var b=f(i,k);n={modal:b,overlay:e(i,k),close:g(b,i)},o.trigger(w)}return n[a]}(b(d)||a(d))&&(d={content:d});var n,o=c(),p=c(),q=c(),r=c(),s=c(),t=m.bind(window,"modal"),u=m.bind(window,"overlay"),v=m.bind(window,"close"),w={modalElem:h(t),closeElem:h(v),overlayElem:h(u),buildDom:l(m),show:function(){return p.trigger(w)&&(u().show(),v(),t().show(),q.trigger(w)),this},close:l(k),forceClose:l(j),destroy:function(){t=t().destroy(),u=u().destroy(),v=void 0},options:function(a){d=a},afterCreate:l(o.watch),beforeShow:l(p.watch),afterShow:l(q.watch),beforeClose:l(r.watch),afterClose:l(s.watch)};return w}});